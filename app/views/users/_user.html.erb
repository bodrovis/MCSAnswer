<%= turbo_frame_tag user do %>
  <h1 class="mb-4"><%= user.name %></h1>

  <div class="mb-3">
    <%= gravatar_for(user: user, size: 200) %>
  </div>

  <% scope = 'activerecord.attributes.user' %>

  <p>
    <strong><%= t 'role', scope: scope %></strong>
    <%= t(user.role, scope: 'global.user.roles') %>
  </p>

  <h2>Турниры</h2>

  <ul>
    <% user.playing_teams.includes(:game, :team).order('games.created_at DESC').each do |team| %>
      <li>
        Команда "<%= team.title %>"
        (турнир "<%= link_to team.game.title, game_path(team.game), data: {turbo_frame: '_top'} %>"),
        <% if team.game.starts_at.present? %>
          <%= l team.game.starts_at, format: :longer %>
        <% end %>
        <br>
        Место <%= team.place %><br>Взято <%= team.total_answered %> из <%= team.game.questions.count %>
      </li>
    <% end %>
  </ul>

  <% if policy(user).update? %>
    <%= link_to t('global.button.edit'), edit_user_path(user), class: 'btn btn-secondary' %>
  <% end %>
<% end %>